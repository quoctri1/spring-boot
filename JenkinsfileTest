 pipeline {
    agent any

    options {
      disableConcurrentBuilds()   
      skipDefaultCheckout()
    }

    triggers {
      upstream(upstreamProjects: 'MyProjectSCM')
    }

    stages {
      stage('Build') {
        steps {
          lock('MyProjectSCM') {
            echo 'Build...'
          }
        }
      }
      stage('Test') {
        steps {
          echo 'Test...'
        }
      }
    }
 }